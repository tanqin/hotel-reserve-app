<script lang="ts" setup>
import type { TGridCardItem } from '@/types/common.type'
import EntranceCard from './components/EntranceCard.vue'
import SettingPopup from './components/SettingPopup.vue'
import { ref } from 'vue'

const GridCardIconList = [
  {
    icon: 'icon-order',
    text: 'å…¨éƒ¨è®¢å•'
  },
  {
    icon: 'icon-valid-order',
    text: 'æœ‰æ•ˆè®¢å•'
  },
  {
    icon: 'icon-unpaid-order',
    text: 'å¾…æ”¯ä»˜è®¢å•'
  },
  {
    icon: 'icon-safety-center',
    text: 'å®‰å…¨ä¸­å¿ƒ'
  },
  {
    icon: 'icon-help',
    text: 'è·å–å¸®åŠ©'
  },
  {
    icon: 'icon-history',
    text: 'å†å²è¶³è¿¹'
  }
]

const settingPopupVisible = ref(false)

// ç‚¹å‡»è®¾ç½®
function handleSetting() {
  settingPopupVisible.value = true
}

// ç‚¹å‡»æŸ¥çœ‹
function handleView(item: TGridCardItem) {
  console.log(item)
}

// å¼€å‘ä½“éªŒ
function handleExperience() {}

// å‘å¸ƒæˆ¿æº
function handlePublishHouse() {}
</script>

<template>
  <view class="mine main-container">
    <view class="setting mb24">
      <uni-icons type="gear" size="30" @tap="handleSetting" />
    </view>
    <view class="user-info">
      <view class="base-info">
        <view class="nickname">Hi å°å“ˆğŸ˜</view>
        <view class="days">ä»Šå¤©æ˜¯ App é™ªä¼´ä½ çš„ç¬¬ 520 å¤©</view>
        <view class="view-profile-btn">æŸ¥çœ‹å¹¶ç¼–è¾‘ä¸ªäººèµ„æ–™</view>
      </view>
      <image class="avatar" src="/static/images/default-avatar.png" mode="aspectFill" />
    </view>
    <view class="my-house-order ptb24">
      <h3>æˆ‘çš„æˆ¿æºè®¢å•</h3>
      <GridCard :list="GridCardIconList" @itemTap="handleView" />
    </view>
    <view class="toggle-mode ptb24">
      <h3>æˆä¸ºæˆ¿ä¸œ/ä½“éªŒè¾¾äºº</h3>
      <EntranceCard title="å¼€å‘ä½“éªŒ" @tap="handleExperience" />
      <EntranceCard title="å‘å¸ƒæˆ¿æº" @tap="handlePublishHouse" />
    </view>
    <SettingPopup v-model:visible="settingPopupVisible" />
  </view>
</template>

<style lang="scss" scoped>
.mine {
  .setting {
    display: flex;
    justify-content: flex-end;
  }
  .user-info {
    display: flex;
    padding-bottom: 24rpx;
    border-bottom: 2rpx solid $bdc-light-gray;
    .base-info {
      flex: 1;
      line-height: 2;
      color: $gray;
      .nickname {
        color: #000;
        font-size: 60rpx;
      }
      .view-profile-btn {
        color: $green;
      }
    }
    .avatar {
      width: 112rpx;
      height: 112rpx;
      border-radius: 50px;
      background-color: $bgc-placeholder;
    }
  }
  .my-house-order {
    border-bottom: 2rpx solid $bdc-light-gray;
  }
}
</style>
