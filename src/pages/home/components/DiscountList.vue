<script lang="ts" setup>
import type { THouseInfo } from '@/types/home.type'
import DiscountCard from './DiscountCard.vue'
import { ref } from 'vue'
import { onShow } from '@dcloudio/uni-app'

const discountHouseList = ref<THouseInfo[]>([])

// èŽ·å–ä¼˜æƒ æˆ¿æºåˆ—è¡¨
function getDiscountHouseList() {
  // ðŸ“Œè°ƒå–æŽ¥å£
  setTimeout(() => {
    discountHouseList.value = []
    for (let i = 0; i < 3; i++) {
      discountHouseList.value.push({
        id: i.toString(),
        pictures: [
          [
            'https://img02.mockplus.cn/image/2020-09-07/2979a210-f0dc-11ea-a598-1b4f0bef9f1b.jpg',
            'https://img02.mockplus.cn/image/2020-09-07/2d73b310-f0dc-11ea-baac-95a5b71ad650.jpg',
            'https://img02.mockplus.cn/image/2020-09-07/32698930-f0dc-11ea-baac-95a5b71ad650.jpg'
          ][i]
        ],
        facility: 'æ•´å¥—æˆ¿å­ Â· 1å®¤1å«1åºŠ',
        tags: [],
        title: 'å¯“è§Â·æ¶ˆæ¯’å®‰å¿ƒä½Â·è§‚æ™¯plus',
        currentPrice: 394,
        originalPrice: 788,
        discountTag: ['é™æ—¶5æŠ˜èµ·', 'ä½Žè‡³5æŠ˜', 'ä½Žè‡³8æŠ˜'][i],
        city: 'æˆéƒ½å¸‚'
      })
    }
  }, 500)
}

onShow(() => {
  getDiscountHouseList()
})
</script>

<template>
  <view class="discount-list">
    <HeadTitle title="æˆéƒ½æˆ¿ä¸œç›´é™ä¼˜æƒ " subTitle="æˆ¿ä¸œç›´æŽ¥è®©åˆ©ï¼Œæ›´å¤šè¶…å€¼é€‰æ‹©" />
    <view class="card-list">
      <uni-row>
        <uni-col :span="12">
          <DiscountCard :data="discountHouseList[0]" />
        </uni-col>
        <uni-col :span="12">
          <DiscountCard :data="discountHouseList[1]" size="small" class="mb24" />
          <DiscountCard :data="discountHouseList[2]" size="small" />
        </uni-col>
      </uni-row>
    </view>
  </view>
</template>

<style lang="scss" scoped></style>
